<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>beertime</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="/favicon.ico">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <!-- build:css styles/vendor.css -->
        <!-- bower:css -->
        <!-- endbower -->
        <!-- endbuild -->
        <!-- build:css(.tmp) styles/main.css -->
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild -->
        <!-- build:js scripts/vendor/modernizr.js -->
        <script src="bower_components/modernizr/modernizr.js"></script>
        <!-- endbuild -->

    </head>
    <body>
        <!--[if lt IE 10]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="wrapper">
            <div class="box">
                <div class="row row-offcanvas row-offcanvas-left">
                              
                  
                    <!-- sidebar -->
                    <div class="column col-sm-2 col-xs-1 sidebar-offcanvas" id="sidebar">
                      <ul class="nav">
                        <li><a href="#" data-toggle="offcanvas" class="visible-xs text-center"><i class="glyphicon glyphicon-chevron-right"></i></a></li>
                      </ul>
                       
                        <ul class="nav hidden-xs" id="lg-menu">
                            <li><a href="#stories"><i class="glyphicon glyphicon-list"></i> Beer</a></li>
                            <li><a href="#"><i class="glyphicon glyphicon-paperclip"></i> Beer</a></li>
                            <li><a href="#"><i class="glyphicon glyphicon-refresh"></i> Beer</a></li>
                        </ul>
                    
                        <!-- tiny only nav-->
                        <ul class="nav visible-xs" id="xs-menu">
                            <li><a href="#stories" class="text-center"><i class="glyphicon glyphicon-list"></i></a></li>
                            <li><a href="#" class="text-center"><i class="glyphicon glyphicon-paperclip"></i></a></li>
                            <li><a href="#" class="text-center"><i class="glyphicon glyphicon-refresh"></i></a></li>
                        </ul>
                      
                    </div>
                    <!-- /sidebar -->
                  
                    <!-- main right col -->
                    <div class="column col-sm-10 col-xs-11" id="main">
                        
                        <!-- top nav -->
                        <div class="navbar navbar-blue navbar-static-top">  
                            <div class="navbar-header">
                              <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                              </button>
                              <a href="/" class="navbar-brand logo">Beer</a>
                            </div>
                            <nav class="collapse navbar-collapse" role="navigation">
                              <ul class="nav navbar-nav navbar-right">                           
                                <li>
                                  <a href="#postModal" role="button" data-toggle="modal"><i class="glyphicon glyphicon-plus"></i> Post a Favor</a>
                                </li>
                              </ul>
                            </nav>
                        </div>
                        <!-- /top nav -->
                      
                        <div class="padding">
                            <div class="full col-sm-12">
                              
                                <!-- content -->                      
                                <div class="row">
                                  
                                 <!-- main col left --> 
                                 <div class="col-sm-12">


                                  <ul class="favor-list">    
                                  </ul>  

                                  <script type="text/template" id="favorTemplate">


                                    <li class="favors"> 
                                      <span class="glyphicon glyphicon-user"></span>
                                      <span>Name:</span>
                                      <span>Kevin</span>
                                      <span class="glyphicon glyphicon-search"></span>
                                      <span class="glyphicon glyphicon-pushpin"></span>
                                      <span class="glyphicon glyphicon-calendar"></span>
                                      <p class="discription">

                                      <%= favorText %>


                                      </p>
                                      <div class="option-wrapper"></div>
                                    </li>


                                  </script>
                                   

                                  
                                   
                                      
                                
                              
                            </div><!-- /col-9 -->
                        </div><!-- /padding -->
                    </div>
                    <!-- /main -->
                  
                </div>
            </div>
        </div>


        <!--post modal-->
        <div id="postModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
              Create A Favor
              </div>
              <div class="modal-body">
                  <form class="form center-block">
                    <div class="form-group">
                      <textarea class="form-control input-lg" id="favorText" autofocus="" placeholder="What favor do you need done?"></textarea>
                    </div>
                  </form>
              </div>
              <div class="modal-footer">
                  <div>
                  <button class="btn btn-primary btn-sm" id="favor-post" data-dismiss="modal" aria-hidden="true">Post</button>
                    <ul class="pull-left list-inline"><li><a href=""><i class="glyphicon glyphicon-upload"></i></a></li><li><a href=""><i class="glyphicon glyphicon-camera"></i></a></li><li><a href=""><i class="glyphicon glyphicon-map-marker"></i></a></li></ul>
              </div>  
              </div>
          </div>
          </div>
        </div>

        <!-- build:js scripts/vendor.js -->
        <!-- bower:js -->
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap.js"></script>
        <script src="bower_components/underscore/underscore.js"></script>
        <script src="bower_components/backbone/backbone.js"></script>











        <!-- endbower -->
        <!-- endbuild -->

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>

        <!-- build:js scripts/plugins.js -->
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/affix.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/alert.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/dropdown.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/tooltip.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/modal.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/transition.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/button.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/popover.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/carousel.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/scrollspy.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/collapse.js"></script>
        <script src="bower_components/bootstrap-sass-official/vendor/assets/javascripts/bootstrap/tab.js"></script>
        <!-- endbuild -->

        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script src="//www.parsecdn.com/js/parse-1.2.18.min.js"></script>
        <script src="scripts/main.js"></script>
        <!-- endbuild -->

        <script>   

        Parse.initialize("JaomJZKutuUVsAFsVdpoHwiR0d2ZMOlLioN3zOpK", "VqstHiz0sF8z0fdkXMzNaAnefEyRtDIkmp55IVcV");

        $(document).ready(function() {
          $("#favor-post").click(function(){
            saveFavor();
          });

          getFavors();

        });


        function getFavors() {

          var Favor = Parse.Object.extend("Favor");
          var query = new Parse.Query(Favor);

          query.descending("createdAt");
          query.limit(50);

          query.find({
            success: function(results){


              $(".favor-list").html("");

              var template = _.template($("#favorTemplate").html())

              $(results).each(function(i,e){
                var f = e.toJSON();
                  $(".favor-list").append(template(f))
              })
            },
            error: function(error){
              console.log(error.message);
            }
          })
        }


        function saveFavor(){
          var Favor = Parse.Object.extend("Favor");
          var favor = new Favor();

          var favorText = $("#favorText").val();


          favor.set("favorText", favorText);

          favor.save(null, {
            success: function() {
              console.log("This saved!");
              getFavors();
            },
            error: function(favor, error){
              console.log(error.message);
            }

          })
        }













        // AUSSIE BUILD

          // var Favors = Parse.Collection.extend ({
          //   url: '/favors'
          // });

          // var FavorList = Backbone.View.extend({
          //   el: '.favor-list',
          //   render: function() {
          //     // var that = this;
          //     // var favors = new Favors();
          //     // favors.fetch({
          //       // success: function(){
          //         this.$el.html('!batman!');
          //         console.log("success!")
          //         }
          //       // },
          //       // error: function(error){
          //         // console.log("Broke ass app");
          //       // }
          //     // });
          //   // }
          // });

          // var Router = Backbone.Router.extend({
          //   routes: {
          //     '' : 'home'
          //     }
          // });

          // favorList = new FavorList();

          // router = new Router();
          // router.on('route:home', function(){
          //   favorList.render();
          // });

          // Backbone.history.start();
        </script>

</body>
</html>
